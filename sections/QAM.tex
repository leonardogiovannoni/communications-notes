
\section*{Modulatore QAM}


\begin{center}

    \begin{tikzpicture}[
            block/.style={rectangle, draw, minimum height=1cm, minimum width=1.5cm},
            node distance=1cm and 1cm,
            auto
        ]
        % Blocks
        \node[block] (source) {Sorgente binaria};
        \node[block, right=of source] (encoder) {Codificatore};
        \node[block, right=of encoder] (interp) {S/P};

        % create a node which is above interp
        \node[above=of interp, inner sep=0pt, minimum size=0pt] (dummy1) {};
        \node[below=of interp, inner sep=0pt, minimum size=0pt] (dummy2) {};


        \node[block, right=of dummy1] (p1) {$p(t)$};

        \node[block, right=of dummy2] (p2) {$p(t)$};
        \node[draw, circle, right=1cm of p1] (m1) {\(\times\)};
        \node[draw, circle, right=1cm of p2] (m2) {\(\times\)};

        \draw[->] (p1) -- (m1);
        \node[below=of m1] (cos) {$\cos(2\pi f_0 t)$};
        \draw[->] (cos) -- (m1);

        \draw[->] (p2) -- (m2);
        \node[below=of m2] (sin) {$-\sin(2\pi f_0 t)$};
        \draw[->] (sin) -- (m2);

        \node[right=2cm of m1, inner sep=0pt, minimum size=0pt] (dummy3) {};
        \node[right=2cm of m2, inner sep=0pt, minimum size=0pt] (dummy4) {};


        \draw[-] (m1) -- (dummy3);
        \draw[-] (m2) -- (dummy4);

        \node[draw, circle, right=5.125cm of interp] (sum) {\(+\)};

        \draw[->] (dummy3) -- (sum);
        \draw[->] (dummy4) -- (sum);

        \node[right=2cm of sum] (dummy5) {};
        \draw[->] (sum) -- node[midway, above] {$s(t)$} (dummy5) {};

        \draw[-] (interp) -- (dummy1);
        \draw[-] (dummy2) -- (interp);

        \draw[->] (dummy1) -- node[midway, above] {$x_c[n]$} (p1);
        \draw[->] (dummy2) -- node[midway, below] {$x_s[n]$} (p2);

        \draw[->] (source) -- (encoder) node[midway,above] {$b[n]$};
        \draw[->] (encoder) -- (interp) node[midway,above] {$x[n]$};


    \end{tikzpicture}
\end{center}

\[
    x[n] = x_c[n] + jx_s[n]
\]
\begin{center}

    \begin{tikzpicture}
        \draw[->] (-2,0) -- (2,0) node[right] {$\Re$};
        \draw[->] (0,-2) -- (0,2) node[above] {$\Im$};

        \draw (0,1) -- (0.1,1) node[above] {$\ \ 1$};


        \foreach \point in {(-1, 1), (1, 1), (-1, -1), (1, -1)}{
                \draw[fill=orange] \point circle (1.5pt);
            }


        % insert caption here
        \node[below=2cm] at (0,0) {
            Simboli 4-QAM, $M_c = 2, M_s = 2$
        };

    \end{tikzpicture}

\end{center}


\[
    \begin{aligned}
         & A^c = \{ \alpha_1^c, \ldots, \alpha_{M_c}^c \} \Rightarrow \alpha_i^c = 2(i - 1 - M_c) \\
         & A^s = \{ \alpha_1^s, \ldots, \alpha_{M_s}^s \} \Rightarrow \alpha_i^s = 2(i - 1 - M_s) \\
         & M^c \cdot M^s = M                                                                      \\
         & x \in \{ 1 + j, 1 - j, 1 + j, -1 - j \}
    \end{aligned}
\]

\noindent
\begin{minipage}{.5\textwidth}
    \centering
    \begin{tikzpicture}
        \draw[->] (-4,0) -- (4,0) node[right] {$\Re$};
        \draw[->] (0,-4) -- (0,4) node[above] {$\Im$};

        \draw (0,1) -- (0.1,1) node[above] {$\ \ 1$};


        \foreach \point in {
        (-3, 1),
        (-3, -1),
        (3, 1),
        (3, -1),   
        (-1, 1),
        (1, 1),
        (-1, -1),
        (1, -1)}{
                \draw[fill=orange] \point circle (1.5pt);
            }

        \node[below=4.5cm] at (0,0) {
            Simboli 8-QAM, $M_c = 4, M_s = 2$
        };

    \end{tikzpicture}

\end{minipage}
\noindent
\begin{minipage}{.5\textwidth}

    \centering
    \begin{tikzpicture}
        \draw[->] (-4,0) -- (4,0) node[right] {$\Re$};
        \draw[->] (0,-4) -- (0,4) node[above] {$\Im$};

        \draw (0,1) -- (0.1,1) node[above] {$\ \ 1$};


        \foreach \point in {
        (1, -3),
        (-1, -3),
        (1, 3),
        (-1, 3),   
        (-1, 1),
        (1, 1),
        (-1, -1),
        (1, -1)}{
                \draw[fill=orange] \point circle (1.5pt);
            }


        % insert caption here
        \node[below=4.5cm] at (0,0) {
            Simboli 8-QAM, $M_c = 2, M_s = 8$
        };

    \end{tikzpicture}


\end{minipage}


\paragraph*{Ricevitore}

\begin{center}

    \begin{tikzpicture}[
            block/.style={rectangle, draw, minimum height=1cm, minimum width=1.5cm},
            node distance=1cm and 1cm,
            auto
        ]
        \tikzstyle{block} = [rectangle, draw, text centered, minimum height=4em, align=center]

        % Blocks
        \node[inner sep=0pt, minimum size=0pt] (encoder) {};
        \node[inner sep=0pt, minimum size=0pt, right=of encoder] (interp) {};

        % create a node which is above interp
        \node[above=of interp, inner sep=0pt, minimum size=0pt] (dummy1) {};
        \node[below=of interp, inner sep=0pt, minimum size=0pt] (dummy2) {};


        \node[draw, circle, right=of dummy1] (p1) {\(\times\)};

        \node[draw, circle, right=of dummy2] (p2) {\(\times\)};
        \node[block, right=1cm of p1, minimum height=1cm, minimum width=1.5cm] (m1) {$h_R(t)$};
        \node[block, right=1cm of p2, minimum height=1cm, minimum width=1.5cm] (m2) {$h_R(t)$};


        %\node[block, right=3cm of m1](dummy3) {Quantizzatore};

        % set height of the node to 4cm
        \node[block, right=7cm of interp, minimum height=4cm](dummy3) {
            \\
            D \\
            E \\
            C \\
            I \\
            S \\
            O \\
            R \\
            E \\
        };
        \draw ([xshift=0]m1.east) -- ([xshift=1cm]m1.east) node[midway,above] {$y_c(t)$};
        \draw ([xshift=1cm]m1.east) -- ([xshift=1.5cm,yshift=0.5cm]m1.east) node[midway,below, yshift=-0.2cm] {$T_s$};
        \draw[->] ([xshift=1.5cm,yshift=0cm]m1.east) -- ++([xshift=-6.75cm]dummy3.west) node[midway,above] {$y_c[k]$};



        \draw ([xshift=0]m2.east) -- ([xshift=1cm]m2.east) node[midway,above] {$y_c(t)$};
        \draw ([xshift=1cm]m2.east) -- ([xshift=1.5cm,yshift=0.5cm]m2.east) node[midway,below, yshift=-0.2cm] {$T_s$};
        \draw[->] ([xshift=1.5cm,yshift=0cm]m2.east) -- ++([xshift=-6.75cm]dummy3.west) node[midway,above] {$y_s[k]$};


        \draw[->] (p1) -- (m1);
        \node[below=0.5cm of p1] (cos) {$2\cos(2\pi f_0 t)$};
        \draw[->] (cos) -- (p1);

        \draw[->] (p2) -- (m2);
        \node[below=0.5cm of p2] (sin) {$-2\sin(2\pi f_0 t)$};
        \draw[->] (sin) -- (p2);

      %  \node[right=2cm of m1, inner sep=0pt, minimum size=0pt] (dummy3) {};
        \node[right=2cm of m2, inner sep=0pt, minimum size=0pt] (dummy4) {};


        %\draw[-] (m1) -- (dummy3);
        %\draw[-] (m2) -- (dummy4);

        \node[right=of dummy3] (phant) {};
        \draw[->] (dummy3) -- node[midway, above] {$\tilde{x}[n]$}(phant);

        \draw[-] (interp) -- (dummy1);
        \draw[-] (dummy2) -- (interp);

        \draw[->] (dummy1) -- node[midway, above] {} (p1);
        \draw[->] (dummy2) -- node[midway, below] {} (p2);

        \draw[-] (encoder) -- (interp) node[midway,above] {$r(t)$};


    \end{tikzpicture}
\end{center}
